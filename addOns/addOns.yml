---
# Require the cluster is fully operation and running
- hosts: master
  remote_user: "{{ ansible_remote_user }}"
  become: true
  gather_facts: false
  roles:
  - { role: cluster-default }
  - { role: k8s-addon, tags: ingress-nginx, when: enable_ingress,       addon: "{{ addons.ingress_nginx }}" }
  - { role: k8s-addon, tags: dashboard,     when: enable_dashboard,     addon: "{{ addons.dashboard }}" }
  - { role: k8s-addon, tags: logging,       when: enable_logging,       addon: "{{ addons.logging }}" }
  - { role: k8s-addon, tags: monitoring,    when: enable_monitoring,    addon: "{{ addons.monitoring }}" }
  - { role: k8s-addon, tags: metric-server, when: enable_metric_server, addon: "{{ addons.metric_server }}" }
                                                                                                              
